<html xmlns:th="http://www.w3.org/1999/xhtml" lang="zh-CN">
<head>
    <title>资料管理平台</title>
    <script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/npm.js"></script>
    <script type="text/javascript" src="/js/config.js"></script>
    <script type="text/javascript" src="/js/data-management-home.js"></script>
    <script type="text/javascript" src="/js/sweetalert.min.js"></script>
    <script type="text/javascript" src="/js/user_role.js"></script>
    <script type="text/javascript" src="/js/bootstrap-contextmenu.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap-treeview.js"></script>


    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="/css/data-management.css">
    <link rel="stylesheet" type="text/css" href="/css/fileManage.css">
    <link rel="stylesheet" type="text/css" href="/css/filemm.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" href="../css/webuploader/webuploader.css">
    <script src="../js/webuploader/webuploader.js"></script>
    <script th:inline="javascript">
        var user = [[${user}]]
    </script>

</head>
<body>
<div id="preview-box"
     style="display: none;z-index: 999; position: fixed;height: 500px;width: 800px;top: 50%;margin-top: -250px;left: 50%;margin-left: -400px;">
    <div onclick="closePreviewBox()"
         style="width: fit-content;font-size: 15px;z-index: 999;background-color: rgb(0,91,200);height: 20px;line-height: 20px;">
        关闭
    </div>
    <div style="height: calc(100% - 20px);">
        <video id="video-player" preload="auto" controls="controls"
               style="z-index: 999;width: 100%;height: 100%;"></video>
    </div>
</div>
<div id="topPanel" class="yp-header" style="z-index: 99;">
    <div class="yp-logo">
        <a href="/" title="资料管理平台">
            <img src="/img/jinhui.jpg">
            <span>资料管理平台</span>
        </a>
    </div>
    <ul class="nav-left">
        <li><a href="#/fileManage" class="router-link-active">文件 </a></li>
        <li><a href="/index/help/">帮助</a></li>
        <li>
            <div class="drop-down nav-more drop-down nav-more" id="guideTarget1">
                <div class="nav-more__button"><span>更多</span></div>
                <div class="dropdown-wrap" style="display: none;">
                    <ul class="nav-more__list"><!----> <!----> <!---->
                        <li class="nav-more__secondary-menu clean-repeat-wrap"><span>清理重复文件</span>
                            <ul>
                                <li><a>扫描我的文件</a></li>
                                <li><a>扫描指定文件夹</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </li>
    </ul>
    <div class="yp-header__avatarWrap">
        <img id="guideTarget2" data-toggle="popover" data-placement="bottom" alt="头像"
             src="https://p1.ssl.qhmsg.com/dm/110_110_100/t01ff97cf587599d047.jpg">
        <div id="user-info" data-v-02139d26="" class="vip-info yp-header__avatarWrap__vip">
            <div data-v-02139d26="" class="corp-detail">
                <h2 data-v-02139d26="" class="titles"><span data-v-02139d26="" th:text="${session.user.name}"></span>
                </h2>
            </div>

            <div data-v-02139d26="" class="account-list">
                <ul data-v-02139d26="" th:if="${session.user.roleId==1}">
                    <li data-v-02139d26="">
                        <a data-v-02139d26="" data-toggle="modal" data-target="#addUserModel">添加用户</a>
                    </li> <!---->
                    <li data-v-02139d26="">
                        <a data-v-02139d26="" data-toggle="modal" data-target="#delUserModel">删除用户</a>
                    </li>
                    <li data-v-02139d26="">
                        <a data-v-02139d26="" data-toggle="modal" data-target="#queUsercloudModel">查看用户网盘</a>
                    </li>
                </ul>
                <ul data-v-02139d26="">
                    <li data-v-02139d26="">
                        <a data-v-02139d26="" data-toggle="modal" data-target="#modifyPasswordModal">
                            修改密码
                        </a>
                    </li>
                </ul>
                <ul data-v-02139d26="">
                    <li data-v-02139d26=""><a data-v-02139d26="" href="/">
                        退出云盘
                    </a></li>
                </ul>
            </div>
        </div>
    </div> <!---->
</div>
<div id="center-wrap">
    <div id="leftPanel" class="left-panel layoutaside">
        <ul class="menu-list nav">
            <li class="menu-list-item">
                <a class="router-link-active" style="padding: 0 15px;" onclick="getAllDocs();">
                    <i class="glyphicon glyphicon-home" style="margin-left: 25px;margin-right: 10px;"></i>全部文件
                </a>
                <ul class="sub-list">
                    <li>
                        <a class="submenu tab-img" onclick="getDocsByType(1)">
                            <i class="glyphicon glyphicon-picture"></i>图片
                        </a>
                    </li>
                    <li>
                        <a class="submenu tab-text" onclick="getDocsByType(2)">
                            <i class="glyphicon glyphicon-folder-open"></i>文档
                        </a>
                    </li>
                    <li>
                        <a class="submenu tab-video" onclick="getDocsByType(3)">
                            <i class="glyphicon glyphicon-film"></i>视频
                        </a>
                    </li>
                    <li>
                        <a class="submenu tab-music" onclick="getDocsByType(4)">
                            <i class="glyphicon glyphicon-headphones"></i>音频
                        </a>
                    </li>
                    <li>
                        <a class="submenu tab-other" onclick="getDocsByType(0)">
                            <i class="glyphicon glyphicon-file"></i>其他
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div id="app" class="center-panel"><!---->
        <div data-v-fccf5e72="" class="timeline center-panel--pic" style="height: 602px;">
            <div data-v-fccf5e72="" class="toolbar" style="border: none;">
                <div data-v-fccf5e72="" class="left">
                    <div data-v-fccf5e72="" class="button-chain button-group--switch">
                        <a id="upload-button"
                           data-toggle="modal" data-target="#upload-modal"
                           data-v-fccf5e72="" href="#/fileManage/upLoad"
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            <i class="glyphicon glyphicon-open" style="margin-right: 5px;"></i>上传
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch">
                        <a id="new-file-button"
                           data-toggle="modal" data-target="#newFolder-modal"
                           data-v-fccf5e72="" href="#/fileManage/newFile"
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 120px;">
                            <i class="glyphicon glyphicon-folder-open" style="margin-right: 5px;"></i>新建文件夹
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch" id="delete-div"
                         style="display: none;">
                        <a id="delete-file-button"
                           data-v-fccf5e72=""
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            <i class="glyphicon glyphicon-trash" style="margin-right: 5px;"></i>删除
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch" id="rename-div"
                         style="display: none;">
                        <a id="rename-file-button"
                           data-toggle="modal" data-target="#renameDocs-modal"
                           data-v-fccf5e72=""
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            重命名
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch" id="move-div"
                         style="display: none;">
                        <a id="move-file-button"
                           data-v-fccf5e72=""
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            移动到
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch" id="preview-div"
                         style="display: none;">
                        <a id="preview-file-button"
                           data-v-fccf5e72=""
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            预览
                        </a>
                    </div>
                    <div data-v-fccf5e72="" class="button-chain button-group--switch" id="download-div"
                         style="display: none;">
                        <a id="download-file-button"
                           data-v-fccf5e72=""
                           class="button-chain-item router-link-exact-active router-link-active"
                           style="letter-spacing: 2px;border-radius: 3px;width: 80px;">
                            下载
                        </a>
                    </div>
                </div>

                <div style="float: right">
                    <i id="search-icon" class="glyphicon glyphicon-search" onclick="selectDocs()"></i>
                    <input id="search-input" type="text" class="form-control" aria-describedby="basic-addon1"
                           onkeyup=" if(event.keyCode===13) {selectDocs()}">>
                </div>
            </div>
            <div class="dir-path-info" style="margin: 10px 0;">
                全部文件
            </div>
            <div data-v-fccf5e72="" class="table-wrap" style="display: none;">
                <div class="file-table" style="height: 602px;">
                    <ul class="file-table-title" style="font-weight: 700;">
                        <li class="column-1"><input type="checkbox" value="" onchange="checkboxChanged();"></li>
                        <li class="column-2">文件名</li>
                        <li class="column-3">大小</li>
                        <li class="column-4">修改日期</li>
                    </ul>
                    <ul class="file-list"></ul>
                </div>
            </div>
            <div data-v-a3b8669e="" data-v-fccf5e72="" class="preview-modal" style="display: none;">
                <div data-v-a3b8669e="" class="preview__header">
                    <div data-v-a3b8669e="" class="preview__edit"><a data-v-a3b8669e="" class="close">×</a></div>
                </div>
                <div data-v-a3b8669e="" class="preview__content"><a data-v-a3b8669e="" class="preview__control--prev"
                                                                    style="display: none;"><i data-v-a3b8669e=""
                                                                                              class="x-icon x-icon-left"></i></a>
                    <a data-v-a3b8669e="" class="preview__control--next" style="display: none;"><i data-v-a3b8669e=""
                                                                                                   class="x-icon x-icon-right"></i></a>
                    <div data-v-a3b8669e="" class="preview__img">
                        <div data-v-a3b8669e="" class="wrapper"><img data-v-a3b8669e=""
                                                                     src="data:image/gif;base64,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"
                                                                     class="preview" style="transform: rotate(0deg);">
                        </div>
                    </div>
                </div>
                <div data-v-a3b8669e="" class="preview__footer">
                    <div data-v-a3b8669e="" class="btn-group"><a data-v-a3b8669e="" class="btn btn--share">
                        <svg data-v-a3b8669e="" aria-hidden="true" class="icon-svg" title="分享">
                            <use xlink:href="#icon-sharelink"></use>
                        </svg>
                    </a> <a data-v-a3b8669e="" title="左旋转" class="btn btn-rotate">
                        <svg data-v-a3b8669e="" aria-hidden="true" class="icon-rotate icon-svg">
                            <use xlink:href="#icon-rotate"></use>
                        </svg>
                    </a> <a data-v-a3b8669e="" class="btn btn--down">
                        <svg data-v-a3b8669e="" aria-hidden="true" class="icon-download icon-svg" title="下载原图">
                            <use xlink:href="#icon-download-stroke"></use>
                        </svg>
                    </a> <a data-v-a3b8669e="" title="删除" class="btn btn--delete">
                        <svg data-v-a3b8669e="" aria-hidden="true" class="icon-delete icon-svg">
                            <use xlink:href="#icon-delete"></use>
                        </svg>
                    </a> <a data-v-a3b8669e="" title="图片详情" class="btn btn--info">
                        <svg data-v-a3b8669e="" aria-hidden="true" class="icon-info icon-svg">
                            <use xlink:href="#icon-info"></use>
                        </svg>
                    </a> <a data-v-a3b8669e="" class="btn btn--original">
                        查看原图
                    </a></div>
                </div> <!----> <!----> <!----></div>
            <div data-v-1061dd8c="" data-v-fccf5e72="" class="empty-wrap">
                <div data-v-3d2518d0="" data-v-1061dd8c="" class="empty-tip empty-tip--file">
                    <h1 data-v-1061dd8c="" data-v-3d2518d0="">您还没有上传过文件哦~</h1>
                </div>
            </div>
        </div>
        <div data-v-71ce96c8="" class="mini-upload" style="visibility: hidden;">
            <svg data-v-71ce96c8="" aria-hidden="true" class="x-button__icon icon-svg">
                <use xlink:href="#icon-upload2"></use>
            </svg>
            <span data-v-71ce96c8="">请选择要上传的文件</span> <!----> <!----> </div>
        <div data-v-5bc8579b="" class="upload-dialog-wrapp upload-dialog-show">
            <div data-v-5bc8579b="" class="upload-dialog"
                 style="top: 140px; left: 495px; transition: width 0.5s ease 0s, height 0.5s ease 0s, top 0.5s ease 0s, left 0.5s ease 0s, transform 0.5s ease 0s, opacity 0.5s ease 0s; transform: inherit; bottom: auto;">
                <div data-v-5bc8579b="" class="upload-dialog-header"><span data-v-5bc8579b="">上传文件到360安全云盘</span> <i
                        data-v-5bc8579b="" class="minimize-icon">-</i> <i data-v-5bc8579b="" class="close-icon">×</i>
                </div>
                <div data-v-5bc8579b="" class="upload-dialog-content">
                    <div data-v-5bc8579b="" class="upload-toolbar clearfix">
                        <div data-v-5bc8579b="" class="upload-btns" style=""><!---->
                            <div data-v-5bc8579b="" class="jx-select-file"><span data-v-5bc8579b=""
                                                                                 class="jx-select-file-text">添加文件</span>
                                <input data-v-5bc8579b="" title="请选择要上传的文件" type="file" multiple="multiple"
                                       class="file-select-proxy"> <i data-v-5bc8579b=""
                                                                     class="jx-select-file-select"></i></div>
                            <div data-v-5bc8579b="" class="jx-select-menu select-menu" style="display: none;"><a
                                    data-v-5bc8579b="" href="javascript:;" class="file-select">
                                添加文件
                                <input data-v-5bc8579b="" title="请选择要上传的文件" type="file" multiple="multiple"
                                       class="file-select-proxy"></a> <a data-v-5bc8579b="" href="javascript:;"
                                                                         class="folder-select">
                                添加文件夹
                                <input data-v-5bc8579b="" title="请选择要上传的文件夹" type="file" webkitdirectory=""
                                       multiple="multiple" class="folder-select-proxy"></a></div>
                        </div>
                        <div data-v-5bc8579b="" class="uploadPath" style=""><span data-v-5bc8579b=""
                                                                                  class="breadcrumb__item">到：</span>
                            <span data-v-5bc8579b="" class="breadcrumb__item">我的文件</span></div>
                        <div data-v-5bc8579b="" class="upload-btns" style="display: none;">不可上传至当前目录</div>
                        <div data-v-5bc8579b="" class="warning-note"><span data-v-5bc8579b="">上传须知</span>
                            <div data-v-5bc8579b="" class="warning-tips" style="display: none;"><span data-v-5bc8579b=""
                                                                                                      class="triangle triangle_lt"></span>
                                <p data-v-5bc8579b=""><i data-v-5bc8579b="" class="icon icon-warning"></i>严禁利用360安全云盘存储、下载、传播暴力恐怖音视频，以及其他任何非法、有害信息，一经发现将严格按照相关法律法规处理。
                                </p>
                                <p data-v-5bc8579b="" style="word-break: normal;">Storing, downloading and sharing
                                    violate, horrific and illegal media contents on 360 Security Cloud is strictly
                                    prohibited. Once discovered, necessary actions, under the supervision of related
                                    laws and regulations, will be taken accordingly.</p></div>
                        </div>
                    </div>
                    <div data-v-5bc8579b="" class="upload-list-box">
                        <ul data-v-5bc8579b="" class="uploadItemList"></ul>
                    </div>
                </div>
                <div data-v-5bc8579b="" class="upload-dialog-footer">
                    <button data-v-5bc8579b="" class="y-btn x-button x-button--primary"><!----> <span
                            class="x-button__label">
        完成
      </span></button>
                </div>
            </div>
        </div>
        <div data-v-1f514def="" class="dd-upload" style="display: none;"><h1 data-v-1f514def="">将文件拖放至此可以上传<br
                data-v-1f514def=""><span data-v-1f514def="">（文件夹不能拖拽上传哦）</span></h1></div>
        <div data-v-5bc8579b="" class="upload-dialog-wrapp upload-dialog-show">
            <div data-v-5bc8579b="" class="upload-dialog" style="top: 140px; left: 495px;">
                <div data-v-5bc8579b="" class="upload-dialog-header"><span data-v-5bc8579b="">上传文件到360安全云盘</span> <i
                        data-v-5bc8579b="" class="minimize-icon">-</i> <i data-v-5bc8579b="" class="close-icon">×</i>
                </div>
                <div data-v-5bc8579b="" class="upload-dialog-content">
                    <div data-v-5bc8579b="" class="upload-toolbar clearfix">
                        <div data-v-5bc8579b="" class="upload-btns" style=""><!---->
                            <div data-v-5bc8579b="" class="jx-select-file"><span data-v-5bc8579b=""
                                                                                 class="jx-select-file-text">添加文件</span>
                                <input data-v-5bc8579b="" title="请选择要上传的文件" type="file" multiple="multiple"
                                       class="file-select-proxy"> <i data-v-5bc8579b=""
                                                                     class="jx-select-file-select"></i></div>
                            <div data-v-5bc8579b="" class="jx-select-menu select-menu" style="display: none;"><a
                                    data-v-5bc8579b="" href="javascript:;" class="file-select">
                                添加文件
                                <input data-v-5bc8579b="" title="请选择要上传的文件" type="file" multiple="multiple"
                                       class="file-select-proxy"></a> <a data-v-5bc8579b="" href="javascript:;"
                                                                         class="folder-select">
                                添加文件夹
                                <input data-v-5bc8579b="" title="请选择要上传的文件夹" type="file" webkitdirectory=""
                                       multiple="multiple" class="folder-select-proxy"></a></div>
                        </div>
                        <div data-v-5bc8579b="" class="uploadPath" style=""><span data-v-5bc8579b=""
                                                                                  class="breadcrumb__item">到：</span>
                            <span data-v-5bc8579b="" class="breadcrumb__item">我的文件</span></div>
                        <div data-v-5bc8579b="" class="upload-btns" style="display: none;">不可上传至当前目录</div>
                        <div data-v-5bc8579b="" class="warning-note"><span data-v-5bc8579b="">上传须知</span>
                            <div data-v-5bc8579b="" class="warning-tips" style="display: none;"><span data-v-5bc8579b=""
                                                                                                      class="triangle triangle_lt"></span>
                                <p data-v-5bc8579b=""><i data-v-5bc8579b="" class="icon icon-warning"></i>严禁利用360安全云盘存储、下载、传播暴力恐怖音视频，以及其他任何非法、有害信息，一经发现将严格按照相关法律法规处理。
                                </p>
                                <p data-v-5bc8579b="" style="word-break: normal;">Storing, downloading and sharing
                                    violate, horrific and illegal media contents on 360 Security Cloud is strictly
                                    prohibited. Once discovered, necessary actions, under the supervision of related
                                    laws and regulations, will be taken accordingly.</p></div>
                        </div>
                    </div>
                    <div data-v-5bc8579b="" class="upload-list-box">
                        <ul data-v-5bc8579b="" class="uploadItemList"></ul>
                    </div>
                </div>
                <div data-v-5bc8579b="" class="upload-dialog-footer">
                    <button data-v-5bc8579b="" class="y-btn x-button x-button--primary"><!----> <span
                            class="x-button__label">
        完成
      </span></button>
                </div>
            </div>
        </div> <!---->
        <div data-v-e1ba4c6c="" class="upload-dialog music-player" style="display: none;">
            <div data-v-e1ba4c6c="" class="upload-dialog-header"><i data-v-e1ba4c6c="" class="player-icon paused"></i>
                <span data-v-e1ba4c6c="" class="title">欢迎使用云盘音乐盒</span> <i data-v-e1ba4c6c=""
                                                                           class="minimize-icon">-</i> <i
                        data-v-e1ba4c6c="" class="close-icon">×</i></div>
            <div data-v-e1ba4c6c="" class="upload-dialog-content" style="height: 385px;">
                <div data-v-e1ba4c6c="">
                    <div data-v-e1ba4c6c="" class="mc-control">
                        <ul data-v-e1ba4c6c="" class="play-btns">
                            <li data-v-e1ba4c6c=""><a data-v-e1ba4c6c="" title="上一首" class="vc-btn mc-control-pre"></a>
                            </li>
                            <li data-v-e1ba4c6c=""><a data-v-e1ba4c6c="" title="暂停[播放]"
                                                      class="vc-btn mc-control-play paused"></a></li>
                            <li data-v-e1ba4c6c=""><a data-v-e1ba4c6c="" title="下一首" class="vc-btn mc-control-next"></a>
                            </li>
                        </ul>
                        <div data-v-e1ba4c6c="" class="mc-control-info"><p data-v-e1ba4c6c="" title="">欢迎使用云盘音乐盒</p>
                            <div data-v-e1ba4c6c="" class="mc-control-mode"><a data-v-e1ba4c6c="" hidefocus="true"
                                                                               onclick="return false;" title="顺序播放"
                                                                               class="vc-btn mode cycle"></a>
                                <ul data-v-e1ba4c6c="">
                                    <li data-v-e1ba4c6c="" class=""><a data-v-e1ba4c6c="" hidefocus="true"
                                                                       onclick="return false;" title="随机播放"
                                                                       class="vc-btn random"></a></li>
                                    <li data-v-e1ba4c6c="" class=""><a data-v-e1ba4c6c="" hidefocus="true"
                                                                       onclick="return false;" title="单曲循环"
                                                                       class="vc-btn single"></a></li>
                                    <li data-v-e1ba4c6c="" class="active"><a data-v-e1ba4c6c="" hidefocus="true"
                                                                             onclick="return false;" title="顺序播放"
                                                                             class="vc-btn cycle"></a></li>
                                </ul>
                            </div>
                            <div data-v-e1ba4c6c="" class="mc-control-volume"><a data-v-e1ba4c6c=""
                                                                                 onclick="return false;" title="静音"
                                                                                 hidefocus="true"
                                                                                 class="vc-btn volume"></a>
                                <div data-v-e1ba4c6c="" class="volume-inner">
                                    <div data-v-e1ba4c6c="" class="vol-slider-wrap">
                                        <div data-v-e1ba4c6c="" class="vol-slider">
                                            <div data-v-e1ba4c6c="" class="vol-slider-range" style="width: 50%;"></div>
                                            <div data-v-e1ba4c6c="" class="vol-slider-handle-wrap">
                                                <div data-v-e1ba4c6c="" class="vol-slider-handle" style="left: 50%;">
                                                    <span data-v-e1ba4c6c=""></span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div data-v-e1ba4c6c="" class="mc-control-time"><span data-v-e1ba4c6c=""
                                                                                  class="t-now">--:--</span> |
                                <span data-v-e1ba4c6c="" class="t-total">--:--</span></div>
                        </div>
                    </div>
                    <div data-v-e1ba4c6c="" class="mc-process">
                        <div data-v-e1ba4c6c="" class="ui-slider">
                            <div data-v-e1ba4c6c="" class="ui-slider-range" style="width: 0%;"></div>
                            <div data-v-e1ba4c6c="" class="ui-slider-progress" style="width: 0%;"></div>
                            <div data-v-e1ba4c6c="" class="ui-slider-handle-wrap"><a data-v-e1ba4c6c=""
                                                                                     class="ui-slider-handle ui-slider-handle-anim"
                                                                                     style="left: 0%;"><span
                                    data-v-e1ba4c6c=""></span></a></div>
                        </div>
                    </div>
                    <div data-v-e1ba4c6c="" class="mc-list">
                        <ul data-v-e1ba4c6c="" style="display: none;"></ul>
                        <div data-v-e1ba4c6c="" class="emptylist"><img data-v-e1ba4c6c=""
                                                                       src=""></div>
                        <div data-v-e1ba4c6c="" class="mc-oper">
                            <div data-v-e1ba4c6c="" class="wrap">
                                <div data-v-e1ba4c6c="" class="select-all"><a data-v-e1ba4c6c="" onclick="return false;"
                                                                              class="vc-btn btn-checkbox"></a> <span
                                        data-v-e1ba4c6c="">全选</span></div>
                                <div data-v-e1ba4c6c="" class="list-oper"><a data-v-e1ba4c6c="" onclick="return false;"
                                                                             class="remove">删除</a> <span
                                        data-v-e1ba4c6c="" class="sep">|</span> <a data-v-e1ba4c6c=""
                                                                                   onclick="return false;"
                                                                                   class="empty">清空列表</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
<!-- 上传文件 -->
<div id="upload-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header"
                 style="position: absolute;top: 0;left: 0;width: 100%;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        style="line-height: 36px;">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="line-height: 36px;">上传文件到资料管理平台</h4>
            </div>
            <div class="modal-body" style="margin-top: 25px;height: 500px;">


                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="caseNo" class="col-sm-2 control-label">案件编号</label>
                        <div class="col-sm-10">
                            <input type="text" id="caseNo" class="form-control" placeholder="案件编号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="caseDesc" class="col-sm-2 control-label">案件详情</label>
                        <div class="col-sm-10">
                            <input type="text" id="caseDesc" class="form-control" placeholder="案件详情">
                        </div>
                    </div>
                    <div class="form-group">
                        <div id="picker" class="col-sm-2 btn btn-blue">选择文件</div>
                    </div>

                </div>
                <div id="thelist" class="uploader-list"
                     style="height: 300px;background-color: rgba(0,91,200, 0.1);border-radius: 3px;margin: 15px 0;overflow: hidden;overflow-y: auto"></div>
            </div>
            <div class="modal-footer" style="border: none;">
                <button type="button" id="ctlBtn" class="btn btn-success">开始上传
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 新建文件夹 -->
<div class="modal fade" id="newFolder-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="position: absolute;top: 0;left: 0;width: 100%;">
                <h4 class="modal-title" style="line-height: 36px;display: inline-block;">新建文件夹</h4>
                <button type="button" class="close" data-dismiss="modal" style="line-height: 36px;">&times;</button>
            </div>
            <div class="modal-body" style="top: 36px;">
                <input type="text" class="form-control" name="addDirName" id="new-file-name" placeholder="请输入文件夹名">
            </div>
            <div class="modal-footer" style="margin-top: 36px;border: none;">
                <button class="btn btn-info" data-dismiss="modal">新建</button>
                <button class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!-- 重命名 -->
<div class="modal fade" id="renameDocs-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="position: absolute;top: 0;left: 0;width: 100%;">
                <h4 class="modal-title" style="line-height: 36px;display: inline-block;">重命名</h4>
                <button type="button" class="close" data-dismiss="modal" style="line-height: 36px;">&times;</button>
            </div>
            <div class="modal-body" style="top: 36px;">
                <input type="text" class="form-control" id="new-name" placeholder="请输入新文件名">
            </div>
            <div class="modal-footer" style="margin-top: 36px;border: none;">
                <button class="btn btn-info" data-dismiss="modal">确定</button>
                <button class="btn btn-secondary" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<!-- 移动 -->
<div class="modal fade" id="moveDocs-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="position: absolute;top: 0;left: 0;width: 100%;">
                <h4 class="modal-title" style="line-height: 36px;display: inline-block;">移动文件</h4>
                <button type="button" class="close" data-dismiss="modal" style="line-height: 36px;">&times;</button>
            </div>
            <div class="modal-body" style="top: 36px;">
                <div id="dirTree"></div>
            </div>
            <div class="modal-footer" style="margin-top: 36px;border: none;">
                <button class="btn btn-info" data-dismiss="modal">确定</button>
                <button class="btn btn-secondary" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- 添加用户 -->
<div class="modal fade" id="addUserModel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">添加用户</h4>
            </div>
            <div class="modal-body">
                <div class="input-group user-name" style="margin-top: 2%">
                    <span class="input-group-addon" id="basic-addon1">用户名：</span>
                    <input id="user-new_name" type="text" class="form-control" placeholder="请输入用户名"
                           aria-describedby="basic-addon1">
                </div>
                <div class="input-group user-name" style="margin-top: 2%">
                    <span class="input-group-addon">警&nbsp;&nbsp;&nbsp;号：</span>
                    <input id="new_alarm" type="text" class="form-control" placeholder="请输入警号"
                           aria-describedby="basic-addon2">
                </div>
                <div class="input-group password" style="margin-top: 2%">
                    <span class="input-group-addon">密&nbsp;&nbsp;&nbsp;码：</span>
                    <input id="new_password" type="text" class="form-control" placeholder="请输入密码"
                           aria-describedby="basic-addon2">
                </div>
                <div class="input-group password" style="margin-top: 2%">
                    <span class="input-group-addon">确认密码：</span>
                    <input id="confirm_password" type="text" class="form-control" placeholder="请重新输入密码"
                           aria-describedby="basic-addon2">
                </div>
                <div class="input-group user-name" style="margin-top: 2%;margin-bottom: 2%">
                    <span class="input-group-addon">角&nbsp;&nbsp;&nbsp;色：</span>
                    <select class="form-control" id="roleId">
                        <option value="1">admin</option>
                        <option value="2">public</option>
                    </select>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-info" onclick="User.addUser()">新增</button>
                <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">关闭
                </button>
            </div>
        </div>
    </div>
</div>
<!-- 删除用户 -->
<div class="modal fade" id="delUserModel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">删除用户</h4>
            </div>
            <div class="modal-body">
                <label>用户名</label>
                <input type="text" class="form-control" name="new_name"
                       id="del_name" placeholder="请输入用户名">
                <label>警号</label>
                <input type="text" class="form-control" name="alarm"
                       id="del_alarm" placeholder="请输入警号">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" onclick="User.delUser()">删除</button>
                <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">关闭
                </button>
            </div>
        </div>
    </div>
</div>
<!--进入其他人网盘-->
<div class="modal fade" id="queUsercloudModel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">选择用户网盘</h4>
            </div>
            <div class="modal-body">
                <table class="table table-hover table-striped">
                    <thead>
                    <tr>
                        <th>序号</th>
                        <th>用户名</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="user:${userList}">
                        <td th:text="${user.id}">test</td>
                        <td th:text="${user.name}">test</td>
                        <td>
                            <button type="button" class="btn btn-info "
                                    th:onclick="'javascript:freshFileListForOtherUser(0,'+${user.id}+')'"
                                    data-dismiss="modal">查看网盘
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- 修改密码 -->
<div class="modal fade" id="modifyPasswordModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">修改密码</h4>
            </div>
            <div class="modal-body">
                <label>原密码</label>
                <input type="password" class="form-control" id="old_password" placeholder="请输入原密码">
                <label>新密码</label>
                <input type="password" class="form-control" id="modify_password" placeholder="请输入新密码">
                <label>确认密码</label>
                <input type="password" class="form-control" id="confirm_modify_password" placeholder="再次输入新密码">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" onclick="User.modifyPassword()">确认</button>
                <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">关闭
                </button>
            </div>
        </div>
    </div>
</div>
<div id="context-menu" style="display: none;">
    <ul>
        <li id="moveContext" onclick="moveDocs();">移动到</li>
        <li id="renameContext" onclick="renameContext();">重命名</li>
        <li id="deleteContext" onclick="deleteDocs();">删除</li>
    </ul>
</div>

<script>
    $(function () {
        initTable();
        $("#upload-modal").on('show.bs.modal', centerModals);
        $("#newFolder-modal").on('show.bs.modal', centerModals);
        $("#renameDocs-modal").on('show.bs.modal', centerModals);
        $(".webuploader-pick").next().css({"width": "100px", "height": "100px"});
    });

    var $btn = $('#ctlBtn');
    var $thelist = $('#thelist');
    var chunkSize = 5 * 1024 * 1024;
    var userId = '${userId}';
    debugger
    // HOOK 这个必须要再uploader实例化前面
    WebUploader.Uploader.register({
        'before-send-file': 'beforeSendFile',
        'before-send': 'beforeSend'
    }, {
        beforeSendFile: function (file) {
            console.log("beforeSendFile");
            // Deferred对象在钩子回掉函数中经常要用到，用来处理需要等待的异步操作。
            var task = new $.Deferred();
            // 根据文件内容来查询MD5
            uploader.md5File(file).progress(function (percentage) {   // 及时显示进度
                console.log('计算md5进度:', percentage);
                getProgressBar(file, percentage, "MD5", "MD5");
            }).then(function (val) { // 完成
                console.log('md5 result:', val);
                file.md5 = val;
                // 模拟用户id
                // file.uid = new Date().getTime() + "_" + Math.random() * 100;
                file.uid = WebUploader.Base.guid();
                // 进行md5判断
                $.post("docs/checkFileMd5", {uid: file.uid, md5: file.md5, "Authorization": localStorage.token},
                    function (data) {
                        console.log(data.code);
                        var status = data.code;
                        task.resolve();
                        if (status == 101) {
                            // 文件不存在，那就正常流程
                        } else if (status == 100) {
                            // 忽略上传过程，直接标识上传成功；
                            uploader.skipFile(file);
                            file.pass = true;
                        } else if (status == 102) {
                            // 部分已经上传到服务器了，但是差几个模块。
                            file.missChunks = data.data;
                        }
                    });
            });
            return $.when(task);
        },
        beforeSend: function (block) {
            console.log("block")
            var task = new $.Deferred();
            var file = block.file;
            var missChunks = file.missChunks;
            var blockChunk = block.chunk;
            console.log("当前分块：" + blockChunk);
            console.log("missChunks:" + missChunks);
            if (missChunks !== null && missChunks !== undefined && missChunks !== '') {
                var flag = true;
                for (var i = 0; i < missChunks.length; i++) {
                    if (blockChunk == missChunks[i]) {
                        console.log(file.name + ":" + blockChunk + ":还没上传，现在上传去吧。");
                        flag = false;
                        break;
                    }
                }
                if (flag) {
                    task.reject();
                } else {
                    task.resolve();
                }
            } else {
                task.resolve();
            }
            return $.when(task);
        }
    });

    // 实例化
    var uploader = WebUploader.create({
        pick: {
            id: '#picker',
            label: '点击选择文件'
        },
        formData: {
            // uid: 0,
            md5: '',
            chunkSize: chunkSize,

        },
        //dnd: '#dndArea',
        //paste: '#uploader',
        swf: 'js/webuploder/Uploader.swf',
        chunked: true,
        chunkSize: chunkSize, // 字节 1M分块
        threads: 3,
        server: 'docs/upload',
        auto: false,

        // 禁掉全局的拖拽功能。这样不会出现图片拖进页面的时候，把图片打开。
        disableGlobalDnd: true,
        fileNumLimit: 1024,
        fileSizeLimit: 1024 * 1024 * 1024,    // 200 M
        fileSingleSizeLimit: 1024 * 1024 * 1024    // 50 M
    });

    // 当有文件被添加进队列的时候
    uploader.on('fileQueued', function (file) {
        console.log("fileQueued");
        $thelist.append('<div id="' + file.id + '" class="item" style="background-color:#cccccc;width: 100%;height: auto;padding: 10px;margin-bottom: 1px">' +
            '<h4 class="info">' + file.name + '</h4>' +
            '<button class="remove-this" style="margin-left: 65%;border: none" >移除</button>' +
            // '<button class="pause-this" style="display:none;border: none;margin-left: 5px" >暂停</button>' +
            // '<button class="start-this" style="display:none;border: none;margin-left: 5px" >开始</button>' +
            '<p class="state" style="float: left;color: yellowgreen;padding-top: 5px;padding-left: 4%">等待上传...</p>' +
            '</div>');
    });

    //当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次。
    uploader.onUploadBeforeSend = function (obj, data) {
        console.log("onUploadBeforeSend");
        var file = obj.file;
        data.md5 = file.md5 || '';
        // data.uid = userId;
        data.caseNo = $("#caseNo").val();
        data.caseDesc = $("#caseDesc").val();
        data.dirId = dirPathArr[dirPathArr.length - 1];
    };
    // 上传中
    uploader.on('uploadProgress', function (file, percentage) {
        $(".pause-this").css("display","inline-block");
        getProgressBar(file, percentage, "FILE", "上传进度");
    });
    // 上传返回结果
    uploader.on('uploadSuccess', function (file) {
        var text = '已上传';
        if (file.pass) {
            text = "文件妙传功能，文件已上传。"
        }
        $('#' + file.id).find('p.state').text(text);
        console.log(file);
        uploader.removeFile(file);
        //移除已经上传完毕的对话
        $('#' + file.id).hide(800);
    });
    uploader.on('uploadError', function (file) {
        $('#' + file.id).find('p.state').text('上传出错');
    });
    uploader.on('uploadComplete', function (file) {
        $btn.text("开始上传")
        // 隐藏进度条
        fadeOutProgress(file, 'MD5');
        fadeOutProgress(file, 'FILE');
        // uploader.reset();
        freshFileList(dirPathArr[dirPathArr.length - 1]);
    });
    // 文件上传
    $btn.on('click', function () {
        console.log("上传...");
        // if ($(this).text()=="开始上传") {
            uploader.upload();
            // $(this).text("暂停上传");
        // }else{
        //     uploader.stop();
        //     $(this).text("开始上传");
        // }
        console.log("上传成功");
    });

    //移除队列中的不想上传的文件
    $thelist.on('click', '.remove-this', function () {
        console.log(this)
        uploader.removeFile(this.parentElement.id,true);
        $('#' + this.parentElement.id).hide(500);
    });
    //暂停单个文件
    $thelist.on('click', '.pause-this', function () {
        $(".pause-this").css("display","none");
        $(".start-this").css("display","inline-block");
        uploader.stop( uploader.getFile(this.parentElement.id));
        $(this).text("开始");
        $(this).removeClass("pause-this").addClass("start-this");
    });
    //开始单个问及爱你
    $thelist.on('click', '.start-this', function () {
        $(".pause-this").css("display","inline-block");
        $(".start-this").css("display","none")
        uploader.upload(this.parentElement.id);
        $(this).text("暂停");
        $(this).removeClass("start-this").addClass("pause-this");
    });


    /**
     *  生成进度条封装方法
     * @param file 文件
     * @param percentage 进度值
     * @param id_Prefix id前缀
     * @param titleName 标题名
     */
    function getProgressBar(file, percentage, id_Prefix, titleName) {
        var $li = $('#' + file.id), $percent = $li.find('#' + id_Prefix + '-progress-bar');
        // 避免重复创建
        if (!$percent.length) {
            $percent = $('<div id="' + id_Prefix + '-progress" class="progress progress-striped active">' +
                '<div id="' + id_Prefix + '-progress-bar" class="progress-bar" role="progressbar" style="width: 0%">' +
                '</div>' +
                '</div>'
            ).appendTo($li).find('#' + id_Prefix + '-progress-bar');
        }
        var progressPercentage = percentage * 100 + '%';
        $percent.css('width', progressPercentage);
        $percent.html(titleName + ':' + progressPercentage);
    }

    /**
     * 隐藏进度条
     * @param file 文件对象
     * @param id_Prefix id前缀
     */
    function fadeOutProgress(file, id_Prefix) {
        $('#' + file.id).find('#' + id_Prefix + '-progress').fadeOut();
    }

</script>